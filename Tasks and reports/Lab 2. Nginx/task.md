# Лабораторная работа №2
## Знакомство с nginx

### Задание 

В данной работе вам будет необходимо оценить как изменятся качественные показатели работы веб-сервера после добавления фронтенд-сервера, для этого предлагается воспользоваться утилитой для тестирования сервера: ApacheBenchmark
Замечание. При использовании AB не стоит допускать деградации производительности сервера. Также предлагается изначально зафиксировать общее количество запросов и количество конкурентных запросов для утилиты AB. 
Результаты оформить в виде отчёта .md.
Код и конфигурацию nginx разместить в репозитории в папке lab2.

<ol>
<li>Замерьте скорость отдачи контента на сервере из лабораторной работы №1 (отдача страниц, картинки, запросов к api). Добавьте логирование приходящих запросов.<ul>
<li>django logger</li>
<li>express logger (middleware)</li>
<li>C# NLog</li>
</ul></li>

<li> Сконфигурируйте nginx сервер таким образом, чтобы запросы проходили через nginx и перенаправлялись на сервер из лабораторной работы №1.
<ul><li><a href="https://nginx.org/ru/docs/beginners_guide.html">Гайд для начинающих</a></li></ul>
</li>

<li>Используйте nginx отдачи статического контента. Как изменилось время ответа сервера?
</li>

<li>Настройте кеширование и gzip сжатие файлов.  Как изменилось время ответа сервера?<ul>
<li><a href="https://ruhighload.com/Как+включить+gzip+в+nginx%3F">Настройка gzip сжатия</a></li>
<li><a href="https://ruhighload.com/post/Кэширование+с+Nginx">Гайд по настройке кеширования</a></li></ul>
</li>

<li>Запустите еще 2 инстанса вашего сервера из лабораторной работы №1, настройте перенаправление таким образом, чтобы на серверы приходили запросы в соотношении 3:1. <ul>
<li><a href="https://ruhighload.com/Балансировка+бэкендов+с+помощью+nginx">Гайд по настройке балансировки.</a></li></ul>
</li>

<li>Напишите еще два мини-сервера. Каждый из них должен обрабатывать два GET-запроса.<ul>
<li>по / отдавать страницу с надписью “Добро пожаловать на сервис #1/#2” и ссылкой, ведущей на /temp</li>
<li>по /temp  возвращать произвольный контент</li></ul>

Настройте nginx так, чтобы в дополнение к п.1-5 он перенаправлял запросы по     url /service1 и /service2 на соответствующие сервера. 
</li>

<li>Настройте отдачу страницы о состоянии сервера<ul>
<li><a href="https://nginx.org/ru/docs/http/ngx_http_stub_status_module.html">nginx status</a></li></ul>
</li>

### Дополнительные задания:

<li>Настройте https порт на сервере nginx. Используйте самоподписанный сертификат. (<a href='https://letsencrypt.org/docs/certificates-for-localhost/'>Создание сертификата)</a></li>

<li>Добавьте ServerPush картинки для страницы index.html. Как изменилось время ответа сервера и загрузки страницы?</li>

<li>Для повышения уровня безопасности необходимо скрывать внутреннюю реализацию вашего сервера. Скройте все заголовки Server(в том числе и nginx) из header ответа, а также дополнительные заголовки, которые дописывает ваш сервер, если есть.</li>
</ol>